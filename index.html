<!DOCTYPE html>
<html>
<head>
<title>White City Weapon Spin</title>
<style>

body {
  background:#000;
  color:white;
  font-family:Arial;
  overflow:hidden;
}

.sidebar {
  position:fixed;
  left:0;
  top:0;
  width:220px;
  height:100%;
  background:#ff2b2b;
  box-shadow:0 0 25px rgba(255,0,0,0.8);
  padding:15px;
}

.sidebar button {
  width:100%;
  padding:15px;
  margin-bottom:10px;
  border:none;
  background:#ff2b2b;
  color:white;
  font-weight:bold;
  cursor:pointer;
  border-radius:6px;
}

.sidebar button:hover {
  background:#ff0000;
}

#wheelContainer {
  position:absolute;
  left:260px;
  top:40%;
  width:800px;
  height:120px;
  overflow:hidden;
  border:2px solid white;
}

#wheel {
  display:flex;
  transition:transform 5s cubic-bezier(.1,.57,.1,1);
}

.weapon {
  min-width:150px;
  text-align:center;
  padding:10px;
  border-right:2px solid #333;
}

.weapon img {
  width:100px;
}

.pointer {
  position:absolute;
  left:640px;
  top:38%;
  width:5px;
  height:150px;
  background:red;
}

</style>
</head>

<body>

<div class="sidebar">
<button onclick="spinTier('t1')">Tier 1</button>
<button onclick="spinTier('t15')">Tier 1.5</button>
<button onclick="spinTier('t2')">Tier 2</button>
<button onclick="spinTier('test')">Test Drop</button>
</div>

<div id="wheelContainer">
  <div id="wheel"></div>
</div>
<div class="pointer"></div>

<script>

// ================= WEAPONS =================

const WEAPONS = {
t1: [
{name:"Canik", img:"img/canik.png"},
{name:"Hi Point", img:"img/hipoint.png"},
{name:"Rusty Revolver", img:"img/revolver.png"}
],

t15: [
{name:"Glock 45", img:"img/glock45.png"},
{name:"Glock 17", img:"img/glock17.png"},
{name:"Glock 43", img:"img/glock43.png"},
{name:"1911", img:"img/1911.png"},
{name:"FN57", img:"img/fn57.png"},
{name:"Glock 45x", img:"img/glock45x.png"},
{name:"Glock 17 Gen 5", img:"img/glock17gen5.png"}
],

t2: [
{name:"Glock 19x", img:"img/glock19x.png"},
{name:"Glock 17", img:"img/glock17.png"},
{name:"HK45", img:"img/hk45.png"},
{name:"Glock 43", img:"img/glock43.png"},
{name:"Glock 45", img:"img/glock45.png"},
{name:"Glock 45x", img:"img/glock45x.png"},
{name:"1911", img:"img/1911.png"},
{name:"Glock 19", img:"img/glock19.png"}
]
};

let spinSpeed = 5000;

// ================= BUILD WHEEL =================

function buildWheel(list){
  const wheel = document.getElementById("wheel");
  wheel.innerHTML = "";

  for(let i=0;i<40;i++){
    const w = list[Math.floor(Math.random()*list.length)];
    const div = document.createElement("div");
    div.className="weapon";
    div.innerHTML = `<img src="${w.img}"><br>${w.name}`;
    wheel.appendChild(div);
  }
}

// ================= SPIN =================

function spinTier(tier){
  let list;
  let drops = 1;

  if(tier=="test"){ list = WEAPONS.t1; drops=1; }
  if(tier=="t1"){ list = WEAPONS.t1; drops=4; }
  if(tier=="t15"){ list = WEAPONS.t15; drops=4; }
  if(tier=="t2"){ list = WEAPONS.t2; drops=6; }

  buildWheel(list);

  const wheel = document.getElementById("wheel");
  const itemWidth = 150;
  const stopIndex = Math.floor(Math.random()*30)+5;
  const finalPos = stopIndex * itemWidth;

  wheel.style.transition = "none";
  wheel.style.transform = "translateX(0px)";
  setTimeout(()=>{
    wheel.style.transition = `transform ${spinSpeed/1000}s cubic-bezier(.1,.57,.1,1)`;
    wheel.style.transform = `translateX(-${finalPos}px)`;
  },50);

  // SNAP FIX (NO JUMP BUG)
  setTimeout(()=>{
    const snapIndex = Math.floor(finalPos/itemWidth);
    const snapPos = snapIndex * itemWidth;
    wheel.style.transition="transform .25s ease-out";
    wheel.style.transform=`translateX(-${snapPos}px)`;
  }, spinSpeed);

  // Faster each spin
  spinSpeed = Math.max(1500, spinSpeed - 300);
}

</script>

</body>
</html>
