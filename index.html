<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>White City Weapons</title>

<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500;700;900&family=Oswald:wght@500;700&display=swap" rel="stylesheet"/>

<style>
:root {
    --primary: #ff4655;
    --bg: #0a0a0c;
    --panel: #111114;
    --sidebar-w: 280px;
    --t1: #4fc3f7;
    --t15: #d32f2f;
    --t2: #ffb300;
}

* { box-sizing: border-box; }

body {
    margin: 0;
    font-family: 'Montserrat', sans-serif;
    background: var(--bg);
    color: #fff;
    display: flex;
    min-height: 100vh;
}

/* ========== SIDEBAR (UNCHANGED) ========== */
.sidebar {
    width: var(--sidebar-w);
    background: linear-gradient(180deg, #111114 0%, #050505 100%);
    border-right: 1px solid rgba(255,70,85,0.2);
    padding: 50px 25px;
    position: fixed;
    height: 100vh;
}

.logo-area {
    text-align: center;
    margin-bottom: 60px;
}

.logo-area h1 {
    font-family: 'Oswald', sans-serif;
    font-size: 2.5rem;
    color: var(--primary);
    margin: 0;
}

.nav-btn {
    background: rgba(255,255,255,0.03);
    border: 1px solid rgba(255,255,255,0.05);
    color: #aaa;
    padding: 18px 25px;
    font-weight: 900;
    text-transform: uppercase;
    margin-bottom: 15px;
    cursor: pointer;
}

.nav-btn.active {
    color: #fff;
    border-color: var(--primary);
}

/* ========== MAIN ========== */
.dashboard {
    margin-left: var(--sidebar-w);
    flex: 1;
    padding: 60px;
}

.section-title {
    font-size: 3rem;
    font-weight: 900;
    border-left: 8px solid var(--primary);
    padding-left: 25px;
}

/* ========== SPINNER ========== */
.crate-module {
    background: #111114;
    border: 2px solid #222;
    padding: 40px;
}

.spinner-viewport {
    height: 220px;
    background: #000;
    overflow: hidden;
    position: relative;
    display: flex;
    align-items: center;
}

.center-line {
    position: absolute;
    left: 50%;
    top: 0;
    bottom: 0;
    width: 4px;
    background: var(--primary);
    z-index: 5;
}

.reel {
    display: flex;
    gap: 15px;
    padding-left: 50%;
    will-change: transform;
}

.reel-item {
    width: 180px;
    height: 180px;
    background: #1a1a20;
    border: 1px solid #333;
    flex-shrink: 0;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
}

.reel-item img {
    width: 80%;
    height: 80%;
    object-fit: contain;
}

.spin-btn {
    margin-top: 40px;
    padding: 20px 80px;
    background: var(--primary);
    border: none;
    color: white;
    font-weight: 900;
    cursor: pointer;
}
</style>
</head>

<body>

<!-- SIDEBAR -->
<div class="sidebar">
    <div class="logo-area">
        <h1>WHITE CITY</h1>
        <p style="opacity:.5;">V1 SYSTEM</p>
    </div>
    <button class="nav-btn active" onclick="show('lucky')">Randomize</button>
</div>

<!-- MAIN -->
<div class="dashboard">

<h2 class="section-title">Probability Engine</h2>

<select id="spin-tier" style="padding:10px 20px; background:#222; color:white; border:1px solid var(--primary);">
    <option value="all">Test Drops</option>
    <option value="t1">Tier 1</option>
    <option value="t15">Tier 1.5</option>
    <option value="t2">Tier 2</option>
</select>

<div class="crate-module">
    <div class="spinner-viewport">
        <div class="center-line"></div>
        <div id="reel" class="reel"></div>
    </div>
    <button class="spin-btn" onclick="runSpinner()">SPIN</button>
</div>

</div>

<script>
/* ========== EDITABLE WEAPONS ========== */
const WEAPONS = [
  {
    name: "Canik",
    img: "https://via.placeholder.com/200",
    tiers: ["t1", "t15"]
  },
  {
    name: "Glock",
    img: "https://via.placeholder.com/200",
    tiers: ["t1"]
  },
  {
    name: "Draco",
    img: "https://via.placeholder.com/200",
    tiers: ["t15", "t2"]
  },
  {
    name: "AR-15",
    img: "https://via.placeholder.com/200",
    tiers: ["t2"]
  }
];

/* ========== SPIN CONFIG ========== */
const SPIN_CONFIG = {
  all: { spins: 2, tier: "t1" },   // Test Drops
  t1:  { spins: 4, tier: "t1" },
  t15: { spins: 4, tier: "t15" },
  t2:  { spins: 6, tier: "t2" }
};

const reel = document.getElementById("reel");

function getWeaponsByTier(tier) {
  return WEAPONS.filter(w => w.tiers.includes(tier));
}

function createItem(w) {
  const d = document.createElement("div");
  d.className = "reel-item";
  d.innerHTML = `<img src="${w.img}"><small>${w.name}</small>`;
  return d;
}

function runSpinner() {
  const type = document.getElementById("spin-tier").value;
  const cfg = SPIN_CONFIG[type];

  const pool = getWeaponsByTier(cfg.tier);
  if (!pool.length) return alert("No weapons in this tier.");

  reel.innerHTML = "";
  reel.style.transition = "none";
  reel.style.transform = "translateX(0)";

  const results = [];

  for (let i = 0; i < cfg.spins * 8; i++) {
    reel.appendChild(createItem(pool[Math.floor(Math.random() * pool.length)]));
  }

  for (let i = 0; i < cfg.spins; i++) {
    results.push(pool[Math.floor(Math.random() * pool.length)]);
  }

  setTimeout(() => {
    reel.style.transition = "transform 3s cubic-bezier(.15,.85,.25,1)";
    reel.style.transform = `translateX(-${cfg.spins * 200}px)`;
  }, 50);

  setTimeout(() => {
    results.forEach(w => reel.appendChild(createItem(w)));
  }, 3200);
}
</script>

</body>
</html>
