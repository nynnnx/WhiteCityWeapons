<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>White City Weapons</title>

<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500;700;900&family=Oswald:wght@500;700&display=swap" rel="stylesheet"/>

<style>
:root {
    --primary:#ff4655;
    --bg:#0a0a0c;
    --panel:#111114;
    --sidebar-w:280px;
    --t1:#4fc3f7;
    --t15:#d32f2f;
    --t2:#ffb300;
}

*{box-sizing:border-box}
body{
    margin:0;
    background:var(--bg);
    color:#fff;
    font-family:Montserrat,sans-serif;
    display:flex;
    min-height:100vh;
}

/* SIDEBAR */
.sidebar{
    width:var(--sidebar-w);
    background:linear-gradient(180deg,#111114,#050505);
    border-right:1px solid rgba(255,70,85,.2);
    padding:50px 25px;
    position:fixed;
    height:100vh;
}
.logo-area h1{
    font-family:Oswald;
    color:var(--primary);
    font-size:2.5rem;
    margin:0;
}
.nav-btn{
    width:100%;
    margin-bottom:15px;
    padding:18px 25px;
    background:rgba(255,255,255,.03);
    border:1px solid rgba(255,255,255,.05);
    color:#aaa;
    cursor:pointer;
    font-weight:900;
    text-transform:uppercase;
}
.nav-btn.active,
.nav-btn:hover{
    color:#fff;
    border-color:var(--primary);
}

/* DASHBOARD */
.dashboard{
    margin-left:var(--sidebar-w);
    padding:60px;
    flex:1;
}

.section-title{
    font-size:3rem;
    font-weight:900;
    border-left:8px solid var(--primary);
    padding-left:25px;
}

/* GRID */
.grid{
    display:grid;
    grid-template-columns:repeat(auto-fill,minmax(220px,1fr));
    gap:30px;
}

/* SPINNER */
.crate-module{
    background:#111114;
    border:2px solid #222;
    padding:60px;
}
.spinner-viewport{
    height:220px;
    background:#000;
    overflow:hidden;
    position:relative;
    display:flex;
    align-items:center;
}
.center-line{
    position:absolute;
    left:50%;
    top:0;
    bottom:0;
    width:4px;
    background:var(--primary);
}
.reel{
    display:flex;
    gap:15px;
    padding-left:50%;
}
.reel-item{
    width:180px;
    height:180px;
    background:#1a1a20;
    border:1px solid #333;
    display:flex;
    align-items:center;
    justify-content:center;
}
.reel-item img{
    width:80%;
    height:80%;
    object-fit:contain;
}
.spin-btn{
    margin-top:40px;
    padding:20px 80px;
    background:var(--primary);
    border:none;
    color:#fff;
    font-size:1.2rem;
    font-weight:900;
    cursor:pointer;
}
</style>
</head>

<body>

<div class="sidebar">
    <div class="logo-area">
        <h1>WHITE CITY</h1>
        <p style="opacity:.5;font-size:.7rem;font-weight:900">V1.0 SYSTEM</p>
    </div>

    <button class="nav-btn active" onclick="nav('weapons',this)">Storage</button>
    <button class="nav-btn" onclick="nav('lucky',this)">Randomize</button>
</div>

<div class="dashboard">

<!-- INVENTORY -->
<div id="sec-weapons">
    <h2 class="section-title">Inventory Data</h2>
    <h3 style="color:var(--t1)">Tier 1</h3>
    <div class="grid"></div>
</div>

<!-- SPINNER -->
<div id="sec-lucky" style="display:none">
    <h2 class="section-title">Probability Engine</h2>

    <select id="spin-tier" style="padding:10px 20px;background:#222;color:#fff;border:1px solid var(--primary)">
        <option value="all">Test Drops</option>
        <option value="t1">Tier 1</option>
        <option value="t15">Tier 1.5</option>
        <option value="t2">Tier 2</option>
    </select>

    <div class="crate-module">
        <div class="spinner-viewport">
            <div class="center-line"></div>
            <div id="reel" class="reel"></div>
        </div>
        <div style="text-align:center">
            <button class="spin-btn" onclick="runSpinner()">SPIN</button>
        </div>
    </div>
</div>

</div>

<script>
// ================= DATA =================

const WEAPONS = {
    t1:[
        {name:"Glock Fade",img:"images/glock.png",color:"#4fc3f7"},
        {name:"USP Neo",img:"images/usp.png",color:"#4fc3f7"}
    ],
    t15:[
        {name:"AK Bloodsport",img:"images/ak.png",color:"#d32f2f"}
    ],
    t2:[
        {name:"AWP Dragon",img:"images/awp.png",color:"#ffb300"}
    ]
};

// ================= NAV =================

function nav(section,btn){
    document.getElementById("sec-weapons").style.display =
        section==="weapons"?"block":"none";
    document.getElementById("sec-lucky").style.display =
        section==="lucky"?"block":"none";

    document.querySelectorAll(".nav-btn").forEach(b=>b.classList.remove("active"));
    btn.classList.add("active");
}

// ================= SPINNER =================

let spinning=false;

function getSpinConfig(tier){
    if(tier==="all") return {spins:2,pool:[...WEAPONS.t1,...WEAPONS.t15,...WEAPONS.t2]};
    if(tier==="t1") return {spins:4,pool:WEAPONS.t1};
    if(tier==="t15") return {spins:4,pool:WEAPONS.t15};
    if(tier==="t2") return {spins:6,pool:WEAPONS.t2};
}

function spinOnce(pool,callback){
    const reel=document.getElementById("reel");
    reel.innerHTML="";
    reel.style.transition="none";
    reel.style.transform="translateX(0)";

    const items=[];
    for(let i=0;i<30;i++){
        items.push(pool[Math.floor(Math.random()*pool.length)]);
    }

    const winIndex=22;
    const winner=items[winIndex];

    items.forEach(w=>{
        const d=document.createElement("div");
        d.className="reel-item";
        d.style.borderBottom=`4px solid ${w.color}`;
        d.innerHTML=`<img src="${w.img}">`;
        reel.appendChild(d);
    });

    requestAnimationFrame(()=>{
        const itemW=195;
        const offset=winIndex*itemW-(reel.parentElement.offsetWidth/2-itemW/2);
        reel.style.transition="transform 5.5s cubic-bezier(.15,0,.1,1)";
        reel.style.transform=`translateX(-${offset}px)`;
    });

    setTimeout(()=>callback(winner),5600);
}

function runSpinner(){
    if(spinning) return;
    spinning=true;

    const tier=document.getElementById("spin-tier").value;
    const {spins,pool}=getSpinConfig(tier);

    let done=0;
    function next(){
        spinOnce(pool,()=>{
            done++;
            if(done<spins) setTimeout(next,400);
            else spinning=false;
        });
    }
    next();
}
</script>

</body>
</html>
